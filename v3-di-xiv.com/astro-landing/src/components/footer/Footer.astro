---
import LanguageSelector from "@/components/reusables/LanguageSelector.tsx";
import SocialIcons from "@/components/footer/SocialIcons.astro";
interface Props {
  locale: string;
  currentPage: string;
  localizedOtherLinks: string;
  localizedWhy: string;
  localizedSiteMap: string;
  localizedAcknoledgements: string;
  mobileAcknoledgements: string;
  localizedCopyrightNotice: string | { __html: string };
  localizedInquiries: string;
  localizedTakedown: string;
  localizedDMCA: string;
  localizedCheckingYourBrowser: string | { __html: string };
}

const {
  locale,
  currentPage,
  localizedOtherLinks,
  localizedWhy,
  localizedSiteMap,
  localizedAcknoledgements,
  mobileAcknoledgements,
  localizedCopyrightNotice,
  localizedInquiries,
  localizedTakedown,
  localizedDMCA,
  localizedCheckingYourBrowser,
} = Astro.props as Props;

function getLocalizedFAQ() {
  if (locale && locale !== "en") {
    return `/${locale}/why`;
  } else {
    return `/why`;
  }
}
let LocalizedAcknowledgements;
try {
  LocalizedAcknowledgements = await import(`./Acknowledgements.astro`);
} catch (e) {
  console.error("Error loading localized component:", e);
}
let LocalizedDMCA;
try {
  LocalizedDMCA = await import(`./DMCA.astro`);
} catch (e) {
  console.error("Error loading localized component:", e);
}
let LocalizedTakedowns;
try {
  LocalizedTakedowns = await import(`./Takedowns.astro`);
} catch (e) {
  console.error("Error loading localized component:", e);
}
---

<footer class="h-max select-none glassbox pt-[1%]">
  <div
    id="footer-wrapper"
    class="w-[75%] ml-[12.5%]
    mobile-only:w-[90%] mobile-only:ml-[5%]
    ultrawide-only:w-[50%] ultrawide-only:ml-[25%] mb-[2%]"
  >
    <div
      id="top-container"
      class="grid not-mobile:grid-cols-3 mobile-only:grid-cols-1 mobile-only:w-[90%] mobile-only:ml-[5%] mobile-only:mt-[5%]"
    >
      <div id="footer-links-wrapper" class="grid grid-cols-2 gap-x-5">
        <div
          id="other-links-container"
          class="grid-cols-1 not-mobile:gap-2 mobile-only:gap-x-5 inline-block p-2 border-l border-solid border-[#efefef]"
        >
          <div
            id="other-links-title"
            class="flex items-center not-mobile:mb-2 mobile-only:mb-1"
          >
            <div class="dark:invert">
              <img
                src="/icons/footer/link-chain-svgrepo-com.svg"
                class="inline-block h-7 mobile-only:h-6 w-auto"
              />
            </div>
            <p
              class="regular inline-block ml-2 not-mobile:text-xl mobile-only:text-lg"
            >
              {localizedOtherLinks}
            </p>
          </div>
          <div id="other-links-links" class="ml-2">
            <a
              id="other-links-faq"
              data-astro-prefetch="hover"
              href={getLocalizedFAQ()}
              class="flex items-center"
              title={localizedWhy}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="inline-block h-5 w-auto"
                viewBox="0 0 24 24"
                ><g fill="none"
                  ><path
                    d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"
                  ></path><path
                    fill="currentColor"
                    d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2m0 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16m0 12a1 1 0 1 1 0 2a1 1 0 0 1 0-2m0-9.5a3.625 3.625 0 0 1 1.348 6.99a.8.8 0 0 0-.305.201c-.044.05-.051.114-.05.18L13 14a1 1 0 0 1-1.993.117L11 14v-.25c0-1.153.93-1.845 1.604-2.116a1.626 1.626 0 1 0-2.229-1.509a1 1 0 1 1-2 0A3.625 3.625 0 0 1 12 6.5"
                  ></path></g
                ></svg
              >
              <span class="inline-block ultralight ml-1 mobile-only:text-sm"
                >{localizedWhy}</span
              >
            </a>
            <a
              id="other-links-sitemap"
              href="/sitemap-0.xml"
              class="flex items-center"
              title={localizedSiteMap}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="inline-block h-5 w-auto"
                viewBox="0 0 24 24"
                ><g fill="none" fill-rule="evenodd"
                  ><path
                    d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"
                  ></path><path
                    fill="currentColor"
                    d="M13 3a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2v2h4a3 3 0 0 1 3 3v1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2v-1a1 1 0 0 0-1-1h-4v2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2v-2H7a1 1 0 0 0-1 1v1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2v-1a3 3 0 0 1 3-3h4V9a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm7 14h-2v2h2zM6 17H4v2h2zm7 0h-2v2h2zm0-12h-2v2h2z"
                  ></path></g
                ></svg
              >
              <span class="inline-block ultralight ml-1 mobile-only:text-sm"
                >{localizedSiteMap}</span
              >
            </a>
          </div>
        </div>
        <div
          id="inquiries-links-container"
          class="grid-cols-1 not-mobile:gap-2 mobile-only:gap-x-5 inline-block p-2 border-l border-solid border-[#efefef]"
        >
          <div
            id="inquiries-links-title"
            class="flex items-center not-mobile:mb-2 mobile-only:mb-1"
          >
            <div class="dark:invert">
              <img
                src="/icons/footer/chat-left-4-svgrepo-com.svg"
                class="inline-block h-8 mobile-only:h-6 w-auto"
              />
            </div>
            <p
              class="regular inline-block ml-2 not-mobile:text-xl mobile-only:text-lg"
            >
              {localizedInquiries}
            </p>
          </div>
          <div id="inquiries-links-links" class="ml-2">
            <a
              id="takedowns-button"
              role="button"
              class="flex items-center"
              title={localizedTakedown}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="inline-block h-5 w-auto"
                viewBox="0 0 48 48"
                ><path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  stroke-width="4"
                  d="m24.003 4l5.27 5.27h9.457v9.456l5.27 5.27l-5.27 5.278v9.456h-9.456L24.004 44l-5.278-5.27H9.27v-9.456L4 23.997l5.27-5.27V9.27h9.456zM17 24h14"
                ></path></svg
              >
              <span class="inline-block ultralight ml-1 mobile-only:text-sm"
                >{localizedTakedown}</span
              >
            </a>
            <a
              id="dmca-button"
              role="button"
              class="flex items-center"
              title={localizedDMCA}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="inline-block h-5 w-auto"
                viewBox="0 0 24 24"
                ><path
                  fill="currentColor"
                  d="M16.288 9.428A4.999 4.999 0 0 0 7 12a4.999 4.999 0 0 0 9.288 2.572l-1.715-1.028A3 3 0 1 1 12 9c1.093 0 2.05.584 2.573 1.457zM22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10s10-4.48 10-10M4 12c0-4.42 3.58-8 8-8s8 3.58 8 8s-3.58 8-8 8s-8-3.58-8-8"
                ></path></svg
              >
              <span class="inline-block ultralight ml-1 mobile-only:text-sm"
                >{localizedDMCA}</span
              >
            </a>
          </div>
        </div>
      </div>
      <div
        id="footer-center-container"
        class="grid grid-cols-1 mobile-only:mt-[5%]"
      >
        <div id="ack-container" class="flex justify-center items-center">
          <div class="inline-block rounded-md px-3 py-1">
            <a
              id="acknowledgements-button"
              role="button"
              class="flex items-center"
              onclick="openAcknowledgementsDialog()"
              title={localizedAcknoledgements}
            >
              <img
                slot="inline-svg"
                src="/icons/footer/medal-reward-svgrepo-com.svg"
                class="h-7 w-auto inline-block"
              />
              <span
                class="ultralight mr-1 ml-1 not-mobile:text-xl mobile-only:text-base"
                >{localizedAcknoledgements}
              </span>
            </a>
          </div>
        </div>
        {
          currentPage !== "index" && currentPage !== "contact" && (
            <SocialIcons />
          )
        }
      </div>
      <div
        id="footer-right-container"
        class="flex flex-col items-end mobile-only:items-center mobile-only:mt-[5%]"
      >
        <div
          id="copy-lang-wrapper"
          class="inline-flex flex-col items-end px-3 p-2 mobile-only:items-center border-l border-solid border-[#efefef]"
        >
          <div
            id="copyright-container"
            class="flex items-center justify-end mobile-only:items-center mb-2"
            title="Di-XIV ❈ 2024"
          >
            <img
              id="footer-wingspan-icon"
              src="/icons/favicon.ico"
              alt="Di-XIV brand icon"
              class="h-7 mobile-only:h-8 w-auto inline-block relative top-[-2px]"
            />
            <p class="regular inline-block mobile-only:hidden ml-1">
              Di-XIV ❈ 2024
            </p>
            <p class="regular inline-block not-mobile:hidden ml-1">❈ 2024</p>
          </div>
          <div class="inline-block">
            <LanguageSelector client:load />
          </div>
        </div>
      </div>
    </div>
  </div>
  {
    (currentPage === "character-references" || currentPage === "why") && (
      <div class="flex justify-center mb-[1%] mobile-only:mt-[5%] mobile-only:w-[80%] mobile-only:ml-[10%]">
        <div class="grid grid-cols-1 gap-y-1 justify-center">
          <div class="flex justify-center items-center">
            <span class="ultralight mobile-only:text-xs">
              FINAL FANTASY, FINAL FANTASY XIV and FFXIV are registered
              trademarks of Square Enix Holdings Co., Ltd.
            </span>
          </div>
          <div class="flex justify-center items-center">
            <a
              href="https://search.arc.net/msLNC4Ohyg1IA0X11tzk"
              class="ultralight mobile-only:text-xs"
              rel="noreferer noopener"
              title="https://search.arc.net/msLNC4Ohyg1IA0X11tzk"
            >
              {localizedCopyrightNotice}
            </a>
          </div>
        </div>
      </div>
    )
  }
</footer>

{
  LocalizedAcknowledgements ? (
    <LocalizedAcknowledgements.default lang={locale} />
  ) : (
    <div>Error loading component</div>
  )
}
{
  LocalizedDMCA ? (
    <LocalizedDMCA.default
      lang={locale}
      localizedCheckingYourBrowser={localizedCheckingYourBrowser}
    />
  ) : (
    <div>Error loading component</div>
  )
}
{
  LocalizedTakedowns ? (
    <LocalizedTakedowns.default
      lang={locale}
      localizedCheckingYourBrowser={localizedCheckingYourBrowser}
    />
  ) : (
    <div>Error loading component</div>
  )
}
